<?php
include("db.php");
$database = make_connection("my_db");

if (isset($_GET['login'])) {
    $user = $_GET['username'];
    $pass = $_GET['password'];

    $query = "SELECT * FROM `users` WHERE username = ? AND password = ?";
    $statement = $database->prepare($query);

    if (!$statement) {
        die('<pre>' . $database->error . '</pre>');
    }

    $statement->bind_param("ss", $user, $pass);
    $statement->execute();
    $result = $statement->get_result();

    if ($result->num_rows == 1) {
        header("Location: main.php?username=$user");
        exit();
    } else {
        echo "<pre>Username and/or password incorrect.</pre>";
    }

    $statement->close();
}

include("static/html/login.html");
?>
